{"ast":null,"code":"var _jsxFileName = \"/Users/jonathanmichaeli/Desktop/ReactApp/client/src/components/Orders/OrdersMap.js\",\n  _s2 = $RefreshSig$();\nimport React, { useMemo, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default marker icon\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\n// Function to generate distinct colors for couriers\nconst generateCourierColors = couriers => {\n  const colors = ['#FF6633', '#FFB399', '#FF33FF', '#FFFF99', '#00B3E6', '#E6B333', '#3366E6', '#999966', '#99FF99', '#B34D4D', '#80B300', '#809900', '#E6B3B3', '#6680B3', '#66991A', '#FF99E6', '#CCFF1A', '#FF1A66', '#E6331A', '#33FFCC'];\n  const courierColors = {};\n  couriers.forEach((courier, index) => {\n    courierColors[courier] = colors[index % colors.length];\n  });\n  return courierColors;\n};\nconst OrdersMap = ({\n  orders,\n  activeTab,\n  isSelectingForRoute,\n  selectedOrders,\n  onSelectOrder\n}) => {\n  _s2();\n  var _s = $RefreshSig$();\n  const filteredOrders = orders.filter(order => order.status === activeTab);\n\n  // Generate colors for couriers\n  const courierColors = useMemo(() => {\n    const couriers = [...new Set(filteredOrders.map(order => order.courier).filter(Boolean))];\n    return generateCourierColors(couriers);\n  }, [filteredOrders]);\n  const MapAdjuster = () => {\n    _s();\n    const map = useMap();\n    useEffect(() => {\n      map.invalidateSize();\n    }, [map]);\n    return null;\n  };\n  _s(MapAdjuster, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n    return [useMap];\n  });\n  const handleMarkerClick = orderId => {\n    if (isSelectingForRoute) {\n      onSelectOrder(orderId);\n    }\n  };\n\n  // Create a custom icon for each courier or status\n  const createCustomIcon = color => {\n    return new L.Icon({\n      iconUrl: `data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"32\" height=\"32\"><path fill=\"${encodeURIComponent(color)}\" d=\"M16 0c-5.523 0-10 4.477-10 10 0 10 10 22 10 22s10-12 10-22c0-5.523-4.477-10-10-10z\"/></svg>`,\n      iconSize: [32, 32],\n      iconAnchor: [16, 32],\n      popupAnchor: [0, -32]\n    });\n  };\n\n  // Get appropriate icon based on order status and courier\n  const getIcon = order => {\n    if (activeTab === 'On Their Way' && order.courier) {\n      return createCustomIcon(courierColors[order.courier]);\n    } else if (activeTab === 'Finished') {\n      return createCustomIcon('#808080'); // Gray for finished orders\n    } else if (activeTab === 'Accepted') {\n      return createCustomIcon('#FFA500'); // Orange for accepted orders\n    }\n    return new L.Icon.Default(); // Default icon as fallback\n  };\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: [40.7128, -74.0060],\n    zoom: 11,\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(MapAdjuster, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }, this), filteredOrders.map(order => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [order.lat, order.lng],\n      icon: getIcon(order),\n      eventHandlers: {\n        click: () => handleMarkerClick(order.id)\n      },\n      opacity: isSelectingForRoute && !selectedOrders.includes(order.id) ? 0.5 : 1,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: order.customer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: order.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Items: \", order.items]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Status: \", order.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this), order.courier && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Courier: \", order.courier]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 35\n          }, this), isSelectingForRoute && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onSelectOrder(order.id),\n            children: selectedOrders.includes(order.id) ? 'Deselect' : 'Select'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, order.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 3\n  }, this);\n};\n_s2(OrdersMap, \"rncT5l0VH+HiW0GyVaQf7dSey9w=\");\n_c = OrdersMap;\nexport default OrdersMap;\nvar _c;\n$RefreshReg$(_c, \"OrdersMap\");","map":{"version":3,"names":["React","useMemo","useEffect","MapContainer","TileLayer","Marker","Popup","useMap","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","generateCourierColors","couriers","colors","courierColors","forEach","courier","index","length","OrdersMap","orders","activeTab","isSelectingForRoute","selectedOrders","onSelectOrder","_s2","_s","$RefreshSig$","filteredOrders","filter","order","status","Set","map","Boolean","MapAdjuster","invalidateSize","handleMarkerClick","orderId","createCustomIcon","color","encodeURIComponent","iconSize","iconAnchor","popupAnchor","getIcon","center","zoom","style","height","width","children","fileName","_jsxFileName","lineNumber","columnNumber","url","attribution","position","lat","lng","icon","eventHandlers","click","id","opacity","includes","customer","address","items","onClick","_c","$RefreshReg$"],"sources":["/Users/jonathanmichaeli/Desktop/ReactApp/client/src/components/Orders/OrdersMap.js"],"sourcesContent":["import React, { useMemo, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default marker icon\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\n// Function to generate distinct colors for couriers\nconst generateCourierColors = (couriers) => {\n  const colors = [\n    '#FF6633', '#FFB399', '#FF33FF', '#FFFF99', '#00B3E6', \n    '#E6B333', '#3366E6', '#999966', '#99FF99', '#B34D4D',\n    '#80B300', '#809900', '#E6B3B3', '#6680B3', '#66991A', \n    '#FF99E6', '#CCFF1A', '#FF1A66', '#E6331A', '#33FFCC',\n  ];\n  \n  const courierColors = {};\n  couriers.forEach((courier, index) => {\n    courierColors[courier] = colors[index % colors.length];\n  });\n  \n  return courierColors;\n};\n\nconst OrdersMap = ({ orders, activeTab, isSelectingForRoute, selectedOrders, onSelectOrder }) => {\n  const filteredOrders = orders.filter(order => order.status === activeTab);\n\n  // Generate colors for couriers\n  const courierColors = useMemo(() => {\n    const couriers = [...new Set(filteredOrders.map(order => order.courier).filter(Boolean))];\n    return generateCourierColors(couriers);\n  }, [filteredOrders]);\n\n  const MapAdjuster = () => {\n    const map = useMap();\n    useEffect(() => {\n      map.invalidateSize();\n    }, [map]);\n    return null;\n  };\n\n  const handleMarkerClick = (orderId) => {\n    if (isSelectingForRoute) {\n      onSelectOrder(orderId);\n    }\n  };\n\n  // Create a custom icon for each courier or status\n  const createCustomIcon = (color) => {\n    return new L.Icon({\n      iconUrl: `data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"32\" height=\"32\"><path fill=\"${encodeURIComponent(color)}\" d=\"M16 0c-5.523 0-10 4.477-10 10 0 10 10 22 10 22s10-12 10-22c0-5.523-4.477-10-10-10z\"/></svg>`,\n      iconSize: [32, 32],\n      iconAnchor: [16, 32],\n      popupAnchor: [0, -32],\n    });\n  };\n\n  // Get appropriate icon based on order status and courier\n  const getIcon = (order) => {\n    if (activeTab === 'On Their Way' && order.courier) {\n      return createCustomIcon(courierColors[order.courier]);\n    } else if (activeTab === 'Finished') {\n      return createCustomIcon('#808080'); // Gray for finished orders\n    } else if (activeTab === 'Accepted') {\n      return createCustomIcon('#FFA500'); // Orange for accepted orders\n    }\n    return new L.Icon.Default(); // Default icon as fallback\n  };\n\n\nreturn (\n  <MapContainer center={[40.7128, -74.0060]} zoom={11} style={{ height: '100%', width: '100%' }}>\n    <MapAdjuster />\n    <TileLayer\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    />\n    {filteredOrders.map(order => (\n      <Marker \n        key={order.id} \n        position={[order.lat, order.lng]}\n        icon={getIcon(order)}\n        eventHandlers={{\n          click: () => handleMarkerClick(order.id),\n        }}\n        opacity={isSelectingForRoute && !selectedOrders.includes(order.id) ? 0.5 : 1}\n      >\n        <Popup>\n        <div>\n                <h3>{order.customer}</h3>\n                <p>{order.address}</p>\n                <p>Items: {order.items}</p>\n                <p>Status: {order.status}</p>\n                {order.courier && <p>Courier: {order.courier}</p>}\n                {isSelectingForRoute && (\n                  <button onClick={() => onSelectOrder(order.id)}>\n                    {selectedOrders.includes(order.id) ? 'Deselect' : 'Select'}\n                  </button>\n                )}\n              </div>\n        </Popup>\n      </Marker>\n    ))}\n  </MapContainer>\n);\n};\n\nexport default OrdersMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}